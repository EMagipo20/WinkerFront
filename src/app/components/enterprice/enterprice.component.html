<!-- Contenedor de búsqueda -->
<div class="search-container">
  <mat-form-field class="search-field" appearance="outline">
    <input
      matInput
      [(ngModel)]="searchTerm"
      (keyup.enter)="buscarEmpresa(searchTerm)"
      placeholder="Ingrese RUC o nombre de la empresa"
      aria-label="Campo de búsqueda"
    />
    <button
      *ngIf="searchTerm"
      mat-icon-button
      matSuffix
      aria-label="Limpiar búsqueda"
      (click)="clearSearch()">
      <mat-icon>close</mat-icon>
    </button>
    <button
      mat-icon-button
      matSuffix
      aria-label="Buscar empresa"
      (click)="buscarEmpresa(searchTerm)">
      <mat-icon>search</mat-icon>
    </button>
  </mat-form-field>
</div>

<!-- Contenedor principal -->
<div class="container">
  <!-- Indicador de carga -->
  <div *ngIf="loading" class="loading-indicator">
    <mat-spinner diameter="30"></mat-spinner>
    <p>Cargando empresas...</p>
  </div>

  <!-- Tarjetas de empresas -->
  <div class="card-container" *ngIf="!loading && empresas.length > 0">
    <div class="card" *ngFor="let empresa of empresas">
      <!-- Logotipo -->
      <div class="logo-container">
        <img
          *ngIf="empresa.logotipoBase64"
          [src]="previewImage(empresa.logotipoBase64)"
          alt="Logotipo de {{ empresa.nombre }}"
          class="logo"
        />
        <mat-icon *ngIf="!empresa.logotipoBase64" class="placeholder-icon">business</mat-icon>
      </div>

      <!-- Detalles de la empresa -->
      <h3 class="empresa-nombre">{{ empresa.nombre }}</h3>
      <ul class="empresa-atributos">
        <li>
          <mat-icon class="icon">badge</mat-icon>
          <strong>RUC:</strong> &nbsp; {{ empresa.ruc }}
        </li>
        <li>
          <mat-icon class="icon">phone</mat-icon>
          <strong>Teléfono:</strong> &nbsp; {{ empresa.telefono || 'No disponible' }}
        </li>
        <li>
          <mat-icon class="icon">person</mat-icon>
          <strong>Usuario:</strong> &nbsp; {{ empresa.username || 'No disponible' }}
        </li>
        <li>
          <mat-icon class="icon">business</mat-icon>
          <strong>Rubro:</strong> &nbsp; {{ empresa.nombreRubro || 'No especificado' }}
        </li>
      </ul>
    </div>
  </div>

  <!-- Mensaje cuando no hay resultados -->
  <div *ngIf="!loading && empresas.length === 0" class="no-results">
    <p>No se encontraron empresas. Intente con otro término de búsqueda.</p>
  </div>
</div>
